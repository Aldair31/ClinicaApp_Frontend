import moment from 'moment'
import React from 'react'
import { Line } from 'react-chartjs-2'
import useHistClinica from '../../hooks/useHistClinica'


const GraficoDeCrecimientoPesoTallaNiño = () => {
	var datos = []
	let {fechaHistoria, fechaNac, pesoPaciente, tallaPaciente} = useHistClinica()


	let talla = [] 

    for (let item in tallaPaciente){
        if(moment(fechaHistoria[item]).diff(moment(fechaNac[0]).format(), 'months') >= 24){
            if(pesoPaciente[item] >= 7 && tallaPaciente[item] >= 77)
            talla[item] = pesoPaciente[item]
        }
    }

	for (var i = 0; i<talla.length; i++){
		datos[talla[i]] = pesoPaciente[i]
	}

  return (
    <div>	
     <Line
        data={
            {
                labels: ['', '', '', 80, '', '', '', '', 85,  '', '', '', '', 90,  '', '', '', '', 95, '', '', '', '', 100, '', '', '', '', 105,  '', '', '', '', 110, '', '', '', '', 115, '', '', '', '', 120, '', ''],
				datasets: [
					//DEL PACIENTE
                    {	
                        label: 'Peso',
                        data : datos,
                        borderColor : 'red',
						borderWidth: 3,
                        spanGaps : true,
						pointRadius : 3
                    },
					//IDEALES MÍNIMOS
                    {
                        label: 'Ideal mínimo',
						data : [8.972919, 9.073268, 9.273092, 9.471922, 9.669971, 9.867465, 10.06464, 10.26174, 10.45903, 10.65676, 10.85521, 11.05464, 11.25535, 11.45762, 11.66174, 11.86801, 12.07671, 12.28815, 12.50263, 12.72043, 12.94186, 13.16721, 13.39676, 13.63078, 13.86955, 14.11332, 14.36233, 14.61679, 14.87688, 15.14279, 15.41461, 15.69245, 15.97631, 16.2662, 16.56202, 16.86366, 17.17091, 17.48355, 17.80131, 18.12386, 18.45088, 18.78199, 19.11682, 19.45497, 19.79603, 20.13956],
                        borderColor : 'rgba(1, 97, 170, 1)',
						borderWidth: 2,
						spanGaps : true,
						pointRadius : 0
                    },
					{
						label : 'Ideal mínimo 2',
						data: [9.350303, 9.455149, 9.663908, 9.871588, 10.0784, 10.28455, 10.49029, 10.69585, 10.90148, 11.10744, 11.314, 11.52142, 11.72999, 11.93997, 12.15166, 12.36532, 12.58125, 12.79973, 13.02103, 13.24543, 13.47321, 13.70463, 13.93996, 14.17946, 14.42339, 14.67197, 14.92545, 15.18406, 15.44799, 15.71744, 15.99258, 16.27355, 16.56048, 16.85344, 17.15247, 17.45759, 17.76873, 18.0858, 18.40867, 18.73715, 19.071, 19.40998, 19.75376, 20.10203, 20.45441, 20.8105],
                        borderColor : 'rgba(1, 97, 170, 1)',
						borderWidth: 2,
                        spanGaps : true,
						pointRadius : 0
					},
					{
						label : 'Ideal mínimo 3',
						data: [9.766408, 9.875876, 10.09384, 10.31066, 10.52655, 10.74175, 10.95648, 11.171, 11.38556, 11.60043, 11.81588, 12.03219, 12.24964, 12.46851, 12.68907, 12.91162, 13.13642, 13.36376, 13.59389, 13.82709, 14.06361, 14.3037, 14.54759, 14.79553, 15.04774, 15.30443, 15.56583, 15.83213, 16.10354, 16.38025, 16.66247, 16.95036, 17.24413, 17.54392, 17.84989, 18.16216, 18.48084, 18.80597, 19.13757, 19.4756, 19.81998, 20.17056, 20.52714, 20.8895, 21.25732, 21.63028],
                        borderColor : 'rgba(1, 97, 170, 1)',
						borderWidth: 1,
                        spanGaps : true,
						pointRadius : 0
					},
					//IDEAL
					{
						label : 'Ideal',
						data: [10.27441, 10.38902, 10.61725, 10.84433, 11.07049, 11.29597, 11.52105, 11.74598, 11.97105, 12.19656, 12.4228, 12.65007, 12.87868, 13.10893, 13.34112, 13.57556, 13.81254, 14.05233, 14.29522, 14.54147, 14.79134, 15.04506, 15.30286, 15.56495, 15.83152, 16.10277, 16.37888, 16.66, 16.94631, 17.23797, 17.53517, 17.83808, 18.14691, 18.46186, 18.78316, 19.11104, 19.44573, 19.78744, 20.13636, 20.49262, 20.85633, 21.2275, 21.6061, 21.99204, 22.38514, 22.78517],
                        borderColor : 'rgba(1, 97, 170, 1)',
						borderWidth: 1,
                        spanGaps : true,
						pointRadius : 0
					},
					//IDEALES MÁXIMOS
					{
						label : 'Ideal máximo',
						data: [10.83813, 10.95778, 11.19613, 11.43339, 11.66984, 11.90577, 12.14148, 12.37729, 12.61352, 12.85052, 13.08863, 13.32822, 13.56963, 13.81322, 14.05935, 14.30837, 14.56062, 14.81645, 15.07616, 15.34008, 15.6085, 15.88169, 16.1599, 16.44336, 16.73229, 17.02686, 17.32725, 17.6336, 17.94603, 18.26469, 18.58968, 18.92114, 19.25922, 19.6041, 19.95598, 20.31511, 20.68175, 21.05621, 21.43877, 21.82972, 22.22931, 22.63774, 23.05517, 23.48168, 23.91726, 24.36185],
                        borderColor : 'rgba(1, 97, 170, 1)',
						borderWidth: 1,
                        spanGaps : true,
						pointRadius : 0
					},
					{
						label : 'Ideal máximo 2',
						data: [11.1669, 11.28916, 11.53276, 11.77537, 12.01729, 12.25883, 12.50033, 12.74214, 12.98464, 13.22819, 13.47318, 13.72002, 13.96909, 14.22081, 14.47557, 14.73378, 14.99583, 15.26211, 15.533, 15.80886, 16.09005, 16.37689, 16.66969, 16.96874, 17.27429, 17.58658, 17.90582, 18.23217, 18.56578, 18.9068, 19.25532, 19.61147, 19.97536, 20.34711, 20.72688, 21.11486, 21.51127, 21.91637, 22.33044, 22.75377, 23.18663, 23.62929, 24.08197, 24.54481, 25.01792, 25.50133],
                        borderColor : 'rgba(1, 97, 170, 1)',
						borderWidth: 1,
                        spanGaps : true,
						pointRadius : 0
					},
					{
						label : 'Ideal máximo 3',
						data: [11.40111, 11.52507, 11.77212, 12.01827, 12.26383, 12.50916, 12.7546, 13.00055, 13.24739, 13.49554, 13.74542, 13.99745, 14.25207, 14.50973, 14.77087, 15.03594, 15.30537, 15.57961, 15.85909, 16.14423, 16.43544, 16.73311, 17.03762, 17.34932, 17.66853, 17.99556, 18.33067, 18.6741, 19.02606, 19.38673, 19.75625, 20.13474, 20.52234, 20.91913, 21.32525, 21.74083, 22.16602, 22.60103, 23.04606, 23.50134, 23.96713, 24.44366, 24.93113, 25.42973, 25.93957, 26.46074],
                        borderColor : 'rgba(1, 97, 170, 1)',
						borderWidth: 1,
                        spanGaps : true,
						pointRadius : 0
					},
                    {
						label : 'Ideal máximo 4',
						data: [12.01729, 12.14509, 12.40003, 12.65439, 12.90856, 13.16297, 13.41805, 13.67427, 13.93212, 14.1921, 14.45474, 14.72057, 14.99015, 15.26406, 15.54289, 15.82724, 16.11772, 16.41498, 16.71964, 17.03238, 17.35385, 17.68473, 18.02572, 18.3775, 18.74078, 19.11628, 19.5047, 19.90675, 20.32313, 20.75452, 21.20158, 21.66493, 22.14512, 22.64267, 23.15798, 23.69138, 24.24312, 24.8133, 25.40197, 26.00906, 26.63444, 27.2779, 27.93919, 28.618, 29.314, 30.02679],
                        borderColor : 'rgba(1, 97, 170, 1)',
						borderWidth: 2,
                        spanGaps : true,
						pointRadius : 0
					}
                ],
            }
        }
        options = {{
			responsive : true,
			plugins : {
				title : {
					display : true,
					text : 'Gráfica de Crecimiento Peso - Talla (2 a 20 años)',
					color : '#0161AA',
					font : {
						size : 20
					}
				},
				legend : {
					display : false
				},
				tooltip : {
					enabled : true
				}
			},
            scales: {
                y: {
                    title : {
                        display : true,
                        text : 'PESO (KG)',
						color : '#0161AA'
                    },
					suggestedMin: 8,
					ticks: {
						stepSize: 1,
						color : '#0161AA'
					}
                },
				x: {
                    title : {
                        display : true,
                        text : 'TALLA (CM)',
						color : '#0161AA'
                    },
					ticks: {
						color : '#0161AA',
                        autoSkip : false,
                        maxRotation: 0,
                        minRotation: 0
					}
                }
            }
        }}
      />
    </div>
  )
}

export default GraficoDeCrecimientoPesoTallaNiño